{"dependencies":[{"name":"I:\\nap\\pixi\\package.json","includedInParent":true,"mtime":1520872037604},{"name":"I:\\nap\\pixi\\.babelrc","includedInParent":true,"mtime":1520870313510},{"name":"I:\\nap\\pixi\\node_modules\\pixi.js\\package.json","includedInParent":true,"mtime":1516219849000},{"name":"../sprites/Sprite","loc":{"line":7,"column":23}},{"name":"../textures/Texture","loc":{"line":11,"column":23}},{"name":"../math","loc":{"line":15,"column":20}},{"name":"../utils","loc":{"line":17,"column":21}},{"name":"../const","loc":{"line":19,"column":21}},{"name":"../settings","loc":{"line":21,"column":24}},{"name":"./TextStyle","loc":{"line":25,"column":25}},{"name":"./TextMetrics","loc":{"line":29,"column":27}},{"name":"../utils/trimCanvas","loc":{"line":33,"column":26}}],"generated":{"js":"\"use strict\";exports.__esModule=!0;var t=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),e=require(\"../sprites/Sprite\"),i=y(e),r=require(\"../textures/Texture\"),o=y(r),s=require(\"../math\"),n=require(\"../utils\"),a=require(\"../const\"),h=require(\"../settings\"),l=y(h),u=require(\"./TextStyle\"),d=y(u),c=require(\"./TextMetrics\"),p=y(c),f=require(\"../utils/trimCanvas\"),g=y(f);function y(t){return t&&t.__esModule?t:{default:t}}function x(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function _(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function v(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var w={texture:!0,children:!1,baseTexture:!0},S=function(e){function i(t,r,n){x(this,i),(n=n||document.createElement(\"canvas\")).width=3,n.height=3;var a=o.default.fromCanvas(n,l.default.SCALE_MODE,\"text\");a.orig=new s.Rectangle,a.trim=new s.Rectangle;var h=_(this,e.call(this,a));return o.default.addToCache(h._texture,h._texture.baseTexture.textureCacheIds[0]),h.canvas=n,h.context=h.canvas.getContext(\"2d\"),h.resolution=l.default.RESOLUTION,h._text=null,h._style=null,h._styleListener=null,h._font=\"\",h.text=t,h.style=r,h.localStyleID=-1,h}return v(i,e),i.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,r=p.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),o=r.width,s=r.height,n=r.lines,a=r.lineHeight,h=r.lineWidths,l=r.maxLineWidth,u=r.fontProperties;this.canvas.width=Math.ceil((o+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((s+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var d=void 0,c=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var f=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,g=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,y=0;y<n.length;y++)d=e.strokeThickness/2,c=e.strokeThickness/2+y*a+u.ascent,\"right\"===e.align?d+=l-h[y]:\"center\"===e.align&&(d+=(l-h[y])/2),e.fill&&(this.drawLetterSpacing(n[y],d+f+e.padding,c+g+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(n[y],d+f+e.padding,c+g+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,n);for(var x=0;x<n.length;x++)d=e.strokeThickness/2,c=e.strokeThickness/2+x*a+u.ascent,\"right\"===e.align?d+=l-h[x]:\"center\"===e.align&&(d+=(l-h[x])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(n[x],d+e.padding,c+e.padding,!0),e.fill&&this.drawLetterSpacing(n[x],d+e.padding,c+e.padding);this.updateTexture()}},i.prototype.drawLetterSpacing=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this._style.letterSpacing;if(0!==o)for(var s=String.prototype.split.call(t,\"\"),n=e,a=0,h=\"\";a<t.length;)h=s[a++],r?this.context.strokeText(h,n,i):this.context.fillText(h,n,i),n+=this.context.measureText(h).width+o;else r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},i.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,g.default)(t);t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0)}var i=this._texture,r=this._style,o=r.trim?0:r.padding,s=i.baseTexture;s.hasLoaded=!0,s.resolution=this.resolution,s.realWidth=t.width,s.realHeight=t.height,s.width=t.width/this.resolution,s.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-2*o,i.orig.height=i._frame.height-2*o,this._onTextureUpdate(),s.emit(\"update\",s),this.dirty=!1},i.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,t)},i.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,t)},i.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},i.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},i.prototype._onStyleChange=function(){this.dirty=!0},i.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,r=void 0,o=void 0,s=void 0,n=this.canvas.width/this.resolution,h=this.canvas.height/this.resolution,l=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var d=l.length+1,c=1;c<d;++c)u.push(c/d);if(l.unshift(t.fill[0]),u.unshift(0),l.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===a.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(n/2,0,n/2,h),r=(l.length+1)*e.length,o=0;for(var p=0;p<e.length;p++){o+=1;for(var f=0;f<l.length;f++)s=\"number\"==typeof u[f]?u[f]/e.length+p/e.length:o/r,i.addColorStop(s,l[f]),o++}}else{i=this.context.createLinearGradient(0,h/2,n,h/2),r=l.length+1,o=1;for(var g=0;g<l.length;g++)s=\"number\"==typeof u[g]?u[g]:o/r,i.addColorStop(s,l[g]),o++}return i},i.prototype.destroy=function(t){\"boolean\"==typeof t&&(t={children:t}),t=Object.assign({},w,t),e.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},t(i,[{key:\"width\",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,n.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:\"height\",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,n.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:\"style\",get:function(){return this._style},set:function(t){(t=t||{})instanceof d.default?this._style=t:this._style=new d.default(t),this.localStyleID=-1,this.dirty=!0}},{key:\"text\",get:function(){return this._text},set:function(t){t=String(\"\"===t||null===t||void 0===t?\" \":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),i}(i.default);exports.default=S;"},"hash":"20be751ed334c8fdb9e826d1a2d3fe20","cacheData":{"env":{}}}