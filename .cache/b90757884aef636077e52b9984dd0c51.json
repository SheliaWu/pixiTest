{"dependencies":[{"name":"I:\\nap\\pixi\\package.json","includedInParent":true,"mtime":1520872037604},{"name":"I:\\nap\\pixi\\.babelrc","includedInParent":true,"mtime":1520870313510},{"name":"I:\\nap\\pixi\\node_modules\\pixi.js\\package.json","includedInParent":true,"mtime":1516219849000},{"name":"../../utils","loc":{"line":5,"column":21}},{"name":"../../const","loc":{"line":7,"column":21}},{"name":"../../renderers/webgl/utils/ObjectRenderer","loc":{"line":9,"column":31}},{"name":"../../renderers/webgl/WebGLRenderer","loc":{"line":13,"column":29}},{"name":"./WebGLGraphicsData","loc":{"line":17,"column":33}},{"name":"./shaders/PrimitiveShader","loc":{"line":21,"column":31}},{"name":"./utils/buildPoly","loc":{"line":25,"column":25}},{"name":"./utils/buildRectangle","loc":{"line":29,"column":30}},{"name":"./utils/buildRoundedRectangle","loc":{"line":33,"column":37}},{"name":"./utils/buildCircle","loc":{"line":37,"column":27}}],"generated":{"js":"\"use strict\";exports.__esModule=!0;var e=require(\"../../utils\"),t=require(\"../../const\"),r=require(\"../../renderers/webgl/utils/ObjectRenderer\"),a=v(r),i=require(\"../../renderers/webgl/WebGLRenderer\"),n=v(i),o=require(\"./WebGLGraphicsData\"),s=v(o),l=require(\"./shaders/PrimitiveShader\"),d=v(l),u=require(\"./utils/buildPoly\"),h=v(u),p=require(\"./utils/buildRectangle\"),c=v(p),f=require(\"./utils/buildRoundedRectangle\"),g=v(f),y=require(\"./utils/buildCircle\"),b=v(y);function v(e){return e&&e.__esModule?e:{default:e}}function D(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function S(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function E(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T=function(r){function i(e){D(this,i);var t=S(this,r.call(this,e));return t.graphicsDataPool=[],t.primitiveShader=null,t.gl=e.gl,t.CONTEXT_UID=0,t}return E(i,r),i.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new d.default(this.gl)},i.prototype.destroy=function(){a.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},i.prototype.render=function(t){var r=this.renderer,a=r.gl,i=void 0,n=t._webGL[this.CONTEXT_UID];n&&t.dirty===n.dirty||(this.updateGraphics(t),n=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;r.bindShader(o),r.state.setBlendMode(t.blendMode);for(var s=0,l=n.data.length;s<l;s++){var d=(i=n.data[s]).shader;r.bindShader(d),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.tint=(0,e.hex2rgb)(t.tint),d.uniforms.alpha=t.worldAlpha,r.bindVao(i.vao),i.nativeLines?a.drawArrays(a.LINES,0,i.points.length/6):i.vao.draw(a.TRIANGLE_STRIP,i.indices.length)}},i.prototype.updateGraphics=function(e){var r=this.renderer.gl,a=e._webGL[this.CONTEXT_UID];if(a||(a=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:r,clearDirty:-1,dirty:-1}),a.dirty=e.dirty,e.clearDirty!==a.clearDirty){a.clearDirty=e.clearDirty;for(var i=0;i<a.data.length;i++)this.graphicsDataPool.push(a.data[i]);a.data.length=0,a.lastIndex=0}for(var n=void 0,o=void 0,s=a.lastIndex;s<e.graphicsData.length;s++){var l=e.graphicsData[s];n=this.getWebGLData(a,0),l.nativeLines&&l.lineWidth&&(o=this.getWebGLData(a,0,!0),a.lastIndex++),l.type===t.SHAPES.POLY&&(0,h.default)(l,n,o),l.type===t.SHAPES.RECT?(0,c.default)(l,n,o):l.type===t.SHAPES.CIRC||l.type===t.SHAPES.ELIP?(0,b.default)(l,n,o):l.type===t.SHAPES.RREC&&(0,g.default)(l,n,o),a.lastIndex++}this.renderer.bindVao(null);for(var d=0;d<a.data.length;d++)(n=a.data[d]).dirty&&n.upload()},i.prototype.getWebGLData=function(e,t,r){var a=e.data[e.data.length-1];return(!a||a.nativeLines!==r||a.points.length>32e4)&&((a=this.graphicsDataPool.pop()||new s.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=r,a.reset(t),e.data.push(a)),a.dirty=!0,a},i}(a.default);exports.default=T,n.default.registerPlugin(\"graphics\",T);"},"hash":"97a685f703a8cb1bf90fa0f34c7a3f0e","cacheData":{"env":{}}}