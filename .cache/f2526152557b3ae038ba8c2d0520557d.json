{"dependencies":[{"name":"I:\\nap\\pixi\\package.json","includedInParent":true,"mtime":1520872037604},{"name":"I:\\nap\\pixi\\.babelrc","includedInParent":true,"mtime":1520870313510},{"name":"I:\\nap\\pixi\\node_modules\\resource-loader\\package.json","includedInParent":true,"mtime":1514846234000},{"name":"mini-signals","loc":{"line":9,"column":27}},{"name":"parse-uri","loc":{"line":13,"column":24}},{"name":"./async","loc":{"line":17,"column":21}},{"name":"./Resource","loc":{"line":21,"column":24}}],"generated":{"js":"\"use strict\";exports.__esModule=!0;var e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},r=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),t=require(\"mini-signals\"),o=c(t),s=require(\"parse-uri\"),n=c(s),i=require(\"./async\"),u=l(i),a=require(\"./Resource\"),h=c(a);function l(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function c(e){return e&&e.__esModule?e:{default:e}}function d(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}var f=100,p=/(#[\\w-]+)?$/,g=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;d(this,t),this.baseUrl=r,this.progress=0,this.loading=!1,this.defaultQueryString=\"\",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(r,t){return e._loadResource(r,t)},this._queue=u.queue(this._boundLoadResource,s),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default}return t.prototype.add=function(r,t,o,s){if(Array.isArray(r)){for(var n=0;n<r.length;++n)this.add(r[n]);return this}if(\"object\"===(void 0===r?\"undefined\":e(r))&&(s=t||r.callback||r.onComplete,o=r,t=r.url,r=r.name||r.key||r.url),\"string\"!=typeof t&&(s=o,o=t,t=r),\"string\"!=typeof t)throw new Error(\"No url passed to add resource to loader.\");if(\"function\"==typeof o&&(s=o,o=null),this.loading&&(!o||!o.parentResource))throw new Error(\"Cannot add resources while the loader is running.\");if(this.resources[r])throw new Error('Resource named \"'+r+'\" already exists.');if(t=this._prepareUrl(t),this.resources[r]=new h.default(r,t,o),\"function\"==typeof s&&this.resources[r].onAfterMiddleware.once(s),this.loading){for(var i=o.parentResource,u=[],a=0;a<i.children.length;++a)i.children[a].isComplete||u.push(i.children[a]);var l=i.progressChunk*(u.length+1)/(u.length+2);i.children.push(this.resources[r]),i.progressChunk=l;for(var c=0;c<u.length;++c)u[c].progressChunk=l;this.resources[r].progressChunk=l}return this._queue.push(this.resources[r]),this},t.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},t.prototype.use=function(e){return this._afterMiddleware.push(e),this},t.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort()}return this.resources={},this},t.prototype.load=function(e){if(\"function\"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=100/this._queue._tasks.length,t=0;t<this._queue._tasks.length;++t)this._queue._tasks[t].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(e){var r=(0,n.default)(e,{strictMode:!0}),t=void 0;if(t=r.protocol||!r.path||0===e.indexOf(\"//\")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf(\"/\")!==this.baseUrl.length-1&&\"/\"!==e.charAt(0)?this.baseUrl+\"/\"+e:this.baseUrl+e,this.defaultQueryString){var o=p.exec(t)[0];-1!==(t=t.substr(0,t.length-o.length)).indexOf(\"?\")?t+=\"&\"+this.defaultQueryString:t+=\"?\"+this.defaultQueryString,t+=o}return t},t.prototype._loadResource=function(e,r){var t=this;e._dequeue=r,u.eachSeries(this._beforeMiddleware,function(r,o){r.call(t,e,function(){o(e.isComplete?{}:null)})},function(){e.isComplete?t._onLoad(e):(e._onLoadBinding=e.onComplete.once(t._onLoad,t),e.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=f,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),u.eachSeries(this._afterMiddleware,function(t,o){t.call(r,e,o)},function(){e.onAfterMiddleware.dispatch(e),r.progress+=e.progressChunk,r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&0===r._resourcesParsing.length&&r._onComplete()},!0)},r(t,[{key:\"concurrency\",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),t}();exports.default=g;"},"hash":"db88516bd67943fc16ff6fb45cfd4eca","cacheData":{"env":{}}}