{"dependencies":[{"name":"I:\\nap\\pixi\\package.json","includedInParent":true,"mtime":1520872037604},{"name":"I:\\nap\\pixi\\.babelrc","includedInParent":true,"mtime":1520870313510},{"name":"I:\\nap\\pixi\\node_modules\\pixi.js\\package.json","includedInParent":true,"mtime":1516219849000},{"name":"../core","loc":{"line":5,"column":20}},{"name":"ismobilejs","loc":{"line":9,"column":26}},{"name":"./accessibleTarget","loc":{"line":13,"column":32}}],"generated":{"js":"\"use strict\";exports.__esModule=!0;var e=require(\"../core\"),t=d(e),i=require(\"ismobilejs\"),s=r(i),n=require(\"./accessibleTarget\"),o=r(n);function r(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function h(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}t.utils.mixins.delayMixin(t.DisplayObject.prototype,o.default);var l=9,c=100,a=0,p=0,u=2,v=1,y=-1e3,b=-1e3,f=2,w=function(){function e(t){h(this,e),!s.default.tablet&&!s.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement(\"div\");i.style.width=c+\"px\",i.style.height=c+\"px\",i.style.position=\"absolute\",i.style.top=a+\"px\",i.style.left=p+\"px\",i.style.zIndex=u,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener(\"keydown\",this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var e=this,t=document.createElement(\"button\");t.style.width=v+\"px\",t.style.height=v+\"px\",t.style.position=\"absolute\",t.style.top=y+\"px\",t.style.left=b+\"px\",t.style.zIndex=f,t.style.backgroundColor=\"#FF0000\",t.title=\"HOOK DIV\",t.addEventListener(\"focus\",function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener(\"mousemove\",this._onMouseMove,!0),window.removeEventListener(\"keydown\",this._onKeyDown,!1),this.renderer.on(\"postrender\",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener(\"mousemove\",this._onMouseMove),window.addEventListener(\"keydown\",this._onKeyDown,!1),this.renderer.off(\"postrender\",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,i=t.length-1;i>=0;i--)this.updateAccessibleObjects(t[i])}},e.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=e.width/this.renderer.width,s=e.height/this.renderer.height,n=this.div;n.style.left=e.left+\"px\",n.style.top=e.top+\"px\",n.style.width=this.renderer.width+\"px\",n.style.height=this.renderer.height+\"px\";for(var o=0;o<this.children.length;o++){var r=this.children[o];if(r.renderId!==this.renderId)r._accessibleActive=!1,t.utils.removeItems(this.children,o,1),this.div.removeChild(r._accessibleDiv),this.pool.push(r._accessibleDiv),r._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{n=r._accessibleDiv;var d=r.hitArea,h=r.worldTransform;r.hitArea?(n.style.left=(h.tx+d.x*h.a)*i+\"px\",n.style.top=(h.ty+d.y*h.d)*s+\"px\",n.style.width=d.width*h.a*i+\"px\",n.style.height=d.height*h.d*s+\"px\"):(d=r.getBounds(),this.capHitArea(d),n.style.left=d.x*i+\"px\",n.style.top=d.y*s+\"px\",n.style.width=d.width*i+\"px\",n.style.height=d.height*s+\"px\")}}this.renderId++}},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement(\"button\")).style.width=c+\"px\",t.style.height=c+\"px\",t.style.backgroundColor=this.debug?\"rgba(255,0,0,0.5)\":\"transparent\",t.style.position=\"absolute\",t.style.zIndex=u,t.style.borderStyle=\"none\",t.addEventListener(\"click\",this._onClick.bind(this)),t.addEventListener(\"focus\",this._onFocus.bind(this)),t.addEventListener(\"focusout\",this._onFocusOut.bind(this))),e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleTitle||e.accessibleHint||(t.title=\"displayObject \"+this.tabIndex),e.accessibleHint&&t.setAttribute(\"aria-label\",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,\"click\",t.eventData)},e.prototype._onFocus=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,\"mouseover\",t.eventData)},e.prototype._onFocusOut=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,\"mouseout\",t.eventData)},e.prototype._onKeyDown=function(e){e.keyCode===l&&this.activate()},e.prototype._onMouseMove=function(){this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener(\"mousemove\",this._onMouseMove),window.removeEventListener(\"keydown\",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();exports.default=w,t.WebGLRenderer.registerPlugin(\"accessibility\",w),t.CanvasRenderer.registerPlugin(\"accessibility\",w);"},"hash":"9913ed1a9eb908f73f4f3f4fc77c2d54","cacheData":{"env":{}}}